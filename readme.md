# YouTube Batch Uploader 🎬

## ✅ תיאור

סקריפט Python לעדכון YouTube אצווה - מוריד קבצי וידאו מכתובות URL ומעלה אותם ליוטיוב אוטומטית.

### תכונות:
- ✅ מוריד קבצי וידאו מכתובות URL
- ✅ מעלה ליוטיוב עם YouTube Data API v3
- ✅ מסמן קבצים שהועלו בהצלחה בקובץ CSV
- ✅ דילוג על קבצים שכבר הורדו
- ✅ חידוש העלאה אוטומטי במקרה של נפילת אינטרנט
- ✅ לוגים מפורטים לקובץ
- ✅ התקדמות מלאה עם progress bars
- ✅ מחיקת קבצים אוטומטית לאחר העלאה מוצלחת (חיסכון במקום בדיסק)

## 📦 דרישות מקדימות

### התקנת חבילות Python
```bash
pip install google-api-python-client google-auth-oauthlib google-auth-httplib2 pandas requests tqdm
```

### קבצי הרשאות YouTube
1. פתח [Google Cloud Console](https://console.cloud.google.com/)
2. צור פרויקט חדש או בחר פרויקט קיים
3. הפעל את **YouTube Data API v3**
4. צור **OAuth 2.0 Client ID** מסוג Desktop application
5. הורד את `credentials.json` ושמור אותו בתיקיית הפרויקט

⚠️ **חשוב**: קובץ `credentials.json` לא יועלה ל-Git (מופיע ב-.gitignore)

### 🔐 פתרון שגיאת 403: access_denied

אם אתה מקבל שגיאה **"403: access_denied"** או **"האפליקציה נמצאת בבדיקה"**, זה אומר שהאפליקציה במצב Testing ויש להוסיף את עצמך לרשימת המשתמשים המאושרים:

1. היכנס ל-[Google Cloud Console](https://console.cloud.google.com/)
2. בחר את הפרויקט שלך
3. לך ל-**APIs & Services** > **OAuth consent screen**
4. גלול למטה לחלק **Test users**
5. לחץ על **+ ADD USERS**
6. הוסף את כתובת ה-Gmail שלך (זו שתשתמש בה להתחברות)
7. לחץ **SAVE**
8. מחק את קובץ `token.pickle` מהתיקייה (אם קיים)
9. הפעל את הסקריפט מחדש - עכשיו תוכל להתחבר

**אלטרנטיבה**: אם אתה רוצה שכל אחד יוכל להשתמש באפליקציה, תוכל לפרסם אותה (דורש אימות נוסף מ-Google).

## 📁 מבנה הקובץ CSV

קובץ `videos.csv` צריך להכיל את העמודות הבאות:

| עמודה | תיאור | דוגמה |
|-------|-------|-------|
| `id` | מזהה ייחודי של השיעור | `14434` |
| `url` | נתיב יחסי של קובץ הווידאו | `/BIS/Achila/Achila - Cavanot 23-07-02.mp4` |
| `length` | אורך הסרטון | `27:35:00` |
| `title` | כותרת הסרטון | `תשפ"ג - כוונות האכילה - שיעור 02` |
| `added` | תאריך הוספה | `7/2/2023 0:00` |
| `cat` | קטגוריה | `כוונות האכילה` |
| `rabi` | שם הרב | `הרב יהושע ביסמוט` |
| `uploaded` | סטטוס העלאה (`yes`/`no`) | `no` |

### דוגמה לקובץ CSV:
```csv
id,url,length,title,added,cat,rabi,uploaded
14434,/BIS/Achila/Achila - Cavanot 23-07-02.mp4,27:35:00,"תשפ""ג - כוונות האכילה - שיעור 02",7/2/2023 0:00,כוונות האכילה,הרב יהושע ביסמוט,no
```

### איך הסקריפט משתמש בנתונים:

- **כותרת הסרטון**: נבנית אוטומטית כ-`rabi - cat - title`
- **תיאור הסרטון**: כולל קישור לאתר הישיבה עם ה-`id` והתאריך מ-`added`
- **URL מלא**: נבנה אוטומטית על ידי הוספת כתובת הבסיס לנתיב ה-`url`

## 🚀 איך להריץ

```bash
python youtube_uploader.py
```

### תהליך העבודה:
1. הסקריפט יבקש הרשאות YouTube בפעם הראשונה (פותח דפדפן)
2. מוריד קבצים לתיקייה `downloads/`
3. מעלה כל קובץ ליוטיוב
4. מעדכן את הקובץ CSV עם סטטוס `uploaded = yes`
5. שומר לוגים בקובץ `upload_log.log`

### 🔄 החלפת פרויקט Google

אם שינית את שם הפרויקט ב-Google Cloud Console או רוצה להתחבר לפרויקט אחר:

1. **מחק את קובץ `token.pickle`** - קובץ זה מכיל את הטוקן מהפרויקט הישן
2. ודא שיש לך קובץ `credentials.json` חדש מהפרויקט החדש
3. הפעל את הסקריפט מחדש - הוא יבקש הרשאות חדשות עם הפרויקט החדש

```bash
# ב-Windows PowerShell:
Remove-Item token.pickle

# או ב-Command Prompt:
del token.pickle
```

## 📝 קבצים וקבצים

- `youtube_uploader.py` - הסקריפט הראשי
- `videos.csv` - קובץ CSV עם רשימת הסרטונים
- `downloads/` - תיקיית קבצים מורדים
- `upload_log.log` - קובץ לוגים מפורט
- `credentials.json` - קובץ הרשאות Google (לא ב-Git)
- `token.pickle` - טוקן אימות (לא ב-Git)

## 🔒 אבטחה

קבצי הרשאות וטוקנים אינם נשמרים ב-Git בזכות קובץ `.gitignore`.

## ⚙️ תכונות מתקדמות

### חידוש העלאה אוטומטי
אם יש נפילת אינטרנט במהלך העלאה, הסקריפט ינסה לחדש את ההעלאה אוטומטית.

### דילוג על קבצים קיימים
אם קובץ כבר קיים בתיקיית `downloads/`, הסקריפט ידלג על ההורדה ויעלה ישירות את הקובץ הקיים.

### מחיקת קבצים אוטומטית
לאחר העלאה מוצלחת ליוטיוב, הקובץ נמחק אוטומטית מתיקיית `downloads/` כדי לחסוך מקום בדיסק. הקובץ נמחק רק לאחר שההעלאה הושלמה בהצלחה והנתונים נשמרו ב-CSV.

### לוגים
כל הפעולות נשמרות בקובץ `upload_log.log` עם חותמת זמן מפורטת.
